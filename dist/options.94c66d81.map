{"version":3,"sources":["utils.js","options.js"],"names":["makeExtensionLogger","ext","mod","log","args","console","apply","undefined","join","err","onError","e","makeLogger","bind","makeGetHostname","parser","document","createElement","getHostname","url","href","hostname","noop","xor","arr","val","arrClone","slice","index","indexOf","splice","concat","getActiveTabDomain","Promise","resolve","browser","tabs","query","active","currentWindow","windowType","map","tab","util","saveOptions","preventDefault","storage","sync","set","userblocklist","querySelector","value","then","blocked","runtime","reload","restoreOptions","setBlocklist","result","get","addEventListener"],"mappings":"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","file":"options.94c66d81.map","sourceRoot":"..","sourcesContent":["const makeExtensionLogger = (ext = '', mod = '') => {\n  const log = (...args) =>\n    console.log.apply(undefined, [[ext, mod].join('-'), ...args]);\n  const err = (...args) => log(`Error: `, args);\n  const onError = e => err(e);\n\n  return {\n    log,\n    err,\n    onError\n  };\n};\n\nexport const makeLogger = makeExtensionLogger.bind(undefined, 'DDG');\n\nconst makeGetHostname = () => {\n  let parser = document.createElement('a');\n  const getHostname = url => {\n    parser.href = url;\n    return parser.hostname;\n  };\n  return getHostname;\n};\n\nexport const getHostname = makeGetHostname();\n\nexport const noop = () => undefined;\n\nexport const xor = (arr, val) => {\n  const arrClone = arr.slice(0);\n  const index = arrClone.indexOf(val);\n  if (index >= 0) {\n    arrClone.splice(index, 1);\n    return arrClone;\n  }\n  return arrClone.concat([val]);\n};\n\nexport function getActiveTabDomain() {\n  return new Promise(resolve => {\n    browser.tabs.query(\n      {\n        active: true,\n        currentWindow: true,\n        windowType: 'normal'\n      },\n      tabs => {\n        const [url] = tabs.map(tab => tab.url);\n        resolve(getHostname(url));\n      }\n    );\n  });\n}\n\nconst util = {\n  xor,\n  noop,\n  makeLogger,\n  getHostname,\n  getActiveTabDomain\n};\n\nexport { util as default };\n","import { makeLogger } from './utils';\nconst { onError } = makeLogger('OPT');\n\nfunction saveOptions(e) {\n  e.preventDefault();\n  browser.storage.sync\n    .set({\n      userblocklist: document.querySelector('#user-blocklist').value\n    })\n    .then(() => {\n      browser.storage.sync.set({ blocked: {} }).then(() => {\n        browser.runtime.reload();\n      });\n    });\n}\n\nfunction restoreOptions() {\n  function setBlocklist(result) {\n    document.querySelector('#user-blocklist').value =\n      result.userblocklist || '';\n  }\n\n  browser.storage.sync.get('userblocklist').then(setBlocklist, onError);\n}\n\ndocument.addEventListener('DOMContentLoaded', restoreOptions);\ndocument.querySelector('form').addEventListener('submit', saveOptions);\n"]}