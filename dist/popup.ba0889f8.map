{"version":3,"sources":["utils.js","popup.js"],"names":["makeExtensionLogger","ext","mod","log","args","console","apply","undefined","join","err","onError","e","makeLogger","bind","makeGetHostname","parser","document","createElement","getHostname","url","href","hostname","noop","util","domain","getElementById","setDomainHTML","innerHTML","blockedlist","setBlockedlistHTML","browser","storage","local","get","then","blocked","list","length","blockedlistHTML","Set","map","i","classnames","addEventListener","preventDefault","setPopupHTML","tabs","query","active","currentWindow","windowType","tab","setTimeout"],"mappings":"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","file":"popup.ba0889f8.map","sourceRoot":"..","sourcesContent":["const makeExtensionLogger = (ext = '', mod = '') => {\n  const log = (...args) =>\n    console.log.apply(undefined, [[ext, mod].join('-'), ...args]);\n  const err = (...args) => log(`Error: `, args);\n  const onError = e => err(e);\n\n  return {\n    log,\n    err,\n    onError\n  };\n};\n\nexport const makeLogger = makeExtensionLogger.bind(undefined, 'DDG');\n\nconst makeGetHostname = () => {\n  let parser = document.createElement('a');\n  const getHostname = url => {\n    parser.href = url;\n    return parser.hostname;\n  };\n  return getHostname;\n};\n\nexport const getHostname = makeGetHostname();\n\nexport const noop = () => undefined;\n\nconst util = {\n  noop,\n  makeLogger,\n  getHostname\n};\n\nexport { util as default };\n","import { makeLogger, getHostname } from './utils';\nconst { log, onError } = makeLogger('POP');\n\nconst domain = document.getElementById('domain');\nconst setDomainHTML = url => {\n  domain.innerHTML = getHostname(url);\n};\nconst blockedlist = document.getElementById('blockedlist');\nconst setBlockedlistHTML = url => {\n  browser.storage.local.get().then(({ blocked = {} }) => {\n    const list = blocked[getHostname(url)];\n    if (typeof list === 'undefined' || list.length === 0) return;\n    const blockedlistHTML = [...new Set(blocked[getHostname(url)])]\n      .map((hostname, i) => {\n        const classnames = i % 2 === 1 ? 'ph3 pv2' : 'ph3 pv2 stripe-dark';\n        return `<li class=\"${classnames}\">${hostname}</li>`;\n      })\n      .join('');\n    blockedlist.innerHTML = blockedlistHTML;\n  }, onError);\n};\n\ndocument.getElementById('disable').addEventListener('click', e => {\n  e.preventDefault();\n  log(document.domain);\n  // browser.storage.local.set()\n});\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  const setPopupHTML = () => {\n    browser.tabs.query(\n      {\n        active: true,\n        currentWindow: true,\n        windowType: 'normal'\n      },\n      tabs => {\n        const [url] = tabs.map(tab => tab.url);\n        setDomainHTML(url);\n        setBlockedlistHTML(url);\n        setTimeout(setPopupHTML, 1500);\n      }\n    );\n  };\n  setPopupHTML();\n});\n"]}